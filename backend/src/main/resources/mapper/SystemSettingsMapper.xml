<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.education.mapper.SystemSettingsMapper">
    
    <update id="updateSettings" parameterType="com.education.dto.SystemSettingsDTO">
        UPDATE system_settings 
        SET setting_value = #{settingValue},
            description = #{description},
            updated_at = CURRENT_TIMESTAMP
        WHERE setting_key = #{settingKey}
    </update>
    
    <select id="findAll" resultType="com.education.dto.SystemSettingsDTO">
        SELECT 
            setting_key as settingKey,
            setting_value as settingValue,
            description,
            created_at as createdAt,
            updated_at as updatedAt
        FROM system_settings
    </select>
    
    <select id="findByKey" resultType="com.education.dto.SystemSettingsDTO">
        SELECT 
            setting_key as settingKey,
            setting_value as settingValue,
            description,
            created_at as createdAt,
            updated_at as updatedAt
        FROM system_settings
        WHERE setting_key = #{key}
    </select>
    
</mapper> 